<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Canvas Demo</title>
</head>
<body>
<canvas width="1000" height="1000" style="border: 5px solid orange" id="canvas">Canvas not supported</canvas>
<script src="canvas.js"></script>
<script>

    canvas.addEventListener('mousemove', function (evt) {
        let mousePos = getMousePos(canvas, evt);
        let message = 'Mouse position: ' + ((mousePos.x).toFixed(0)) + ',' + ((mousePos.y).toFixed(0));
        writeMessage(canvas, message);
    }, false);

    let pull = [];
    let position;
    let colour = '';
    let count = 0;

    canvas.addEventListener('mousedown', function (evt) {
        position = getMousePos(canvas, evt);
        let message1 = 'Position' + ((position.x).toFixed(0)) + ',' + ((position.y).toFixed(0));
        writeMessage1(canvas, message1);
        fillboard(position);
        playField();
    }, false);
    // ...................................... fill board


    function cls() {
        ctx.clearRect(0, 0, 1200, 1200);
    }

    let pointPosition;

    playField();

    function writeMessage(canvas, message) {
        pf.clearRect(0, 0, 400, 30);
        pf.font = '18pt Calibri';
        pf.fillStyle = 'black';
        pf.fillText(message, 10, 25);
    }
    function writeMessage1(canvas, message) {
        pf.clearRect(400, 0, 800, 30);
        pf.font = '18pt Calibri';
        pf.fillStyle = 'black';
        pf.fillText(message, 410, 25);
    }

    function fillboard(position) {
        let arr = [[70, 70], [70, 500], [70, 920], [500, 920], [930, 70], [930, 500],
            [930, 920], [500, 70], [220, 220], [220, 500], [220, 780], [500, 780], [780, 780],
            [780, 500], [780, 220], [500, 220], [370, 370], [370, 500], [370, 630], [500, 630],
            [630, 630], [630, 500], [630, 370], [500, 370]];

        let ifPointOnPosition = false;

            for (let point of arr) {

                    if ((position.x >= point[0] - 30 && position.x <= point[0] + 30) &&
                        (position.y >= point[1] - 30 && position.y <= point[1] + 30)) {
                        ifPointOnPosition = true;
                        count++;
                        if (count % 2 == 0) {
                            colour = 'red';
                        } else {
                            colour = 'blue';
                        }
                        console.log('true');
                        if (count <= 18) {
                            pull.push({x: point[0], y: point[1], colour: colour});
                            if(colour != 'yellow'){
                                break;
                            }
                        }
                }
            }

        return ifPointOnPosition;
    }

    function getMousePos(canvas, evt) {
        let rect = canvas.getBoundingClientRect();
        return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top,
        };
    }

    function res() {
        ctx.fillStyle = 'white';
        ctx.strokeStyle = ' black';
        ctx.lineWidth = 1;
        ctx.lineCap = 'butt';
    }

/*    function grid() {
        ctx.save();
        ctx.strokeStyle = 'grey';
        ctx.lineWidth = 0.25;
        for (let row = 0; row < 60; row++) {
            if (row % 5 == 0) ctx.lineWidth = 0.5;
            if (row % 10 == 0) ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, row * 10);
            ctx.lineTo(800, row * 10);
            ctx.stroke();
            if (row % 5 == 0) ctx.lineWidth = 0.25;
        }
        for (let col = 0; col < 80; col++) {
            if (col % 5 == 0) ctx.lineWidth = 0.5;
            if (col % 10 == 0) ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(col * 10, 0);
            ctx.lineTo(col * 10, 600);
            ctx.stroke();
            if (col % 5 == 0) ctx.lineWidth = 0.25;
        }
        ctx.restore();
    }*/
</script>
</body>
</html>